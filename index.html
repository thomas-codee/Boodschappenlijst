<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>De Recepten Raket!</title>

<link rel="icon" type="image/png" href="logo.png">
<link rel="apple-touch-icon" href="logo.png">
<meta name="theme-color" content="#5cb377">

<style>
  @import url('https://fonts.googleapis.com/css2?family=Cabin+Sketch:wght@400;700&family=Kalam:wght@300;400;700&display=swap');
  
  :root {
    --color-primary: #5cb377;
    --color-secondary: #ff6347;
    --color-background: #fdf6e3;
    --color-text: #2c3e50;
    --font-heading: 'Cabin Sketch', cursive;
    --font-body: 'Kalam', cursive;
  }

  /* ------------------------------------------------
   * MOBILE-FIRST STYLES (Default for all screen sizes)
   * ------------------------------------------------ */

  body {
    font-family: var(--font-body);
    display: flex;
    flex-direction: column; 
    padding: 15px; /* Minder padding voor mobiel */
    background-color: var(--color-background); 
    color: var(--color-text);
    min-height: 100vh;
    box-sizing: border-box; /* Zorg ervoor dat padding de breedte niet be√Ønvloedt */
  }

  h2 {
    font-family: var(--font-heading);
    color: var(--color-secondary); 
    margin-top: 0;
    margin-bottom: 20px; /* Iets minder marge */
    font-size: 2em; /* Iets kleiner voor mobiel */
    text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
    border-bottom: 3px dashed var(--color-primary);
    padding-bottom: 8px;
    position: relative;
  }

  h2 img.logo-header {
    position: absolute;
    top: 0;
    right: 0;
    width: 40px; /* Kleiner logo op mobiel */
    height: 40px;
  }

  .controls, .shopping-list {
    flex: 1; /* Zorgt ervoor dat ze de flex containerruimte vullen */
    width: 100%; /* Belangrijk voor volle breedte op mobiel */
    margin: 0 0 30px 0; /* Standaard marge onderaan voor stapelen */
    background: #ffffff; 
    padding: 20px; /* Minder padding voor mobiel */
    border-radius: 15px; /* Iets minder afgeronde hoeken */
    border: 3px solid var(--color-text);
    box-sizing: border-box;
  }

  .controls {
    box-shadow: 6px 6px 0px var(--color-primary); /* Iets kleinere schaduw */
  }
  
  .shopping-list {
    min-width: unset; /* Overschrijf de oorspronkelijke min-width */
    box-shadow: -6px 6px 0px var(--color-secondary); /* Iets kleinere schaduw */
    position: relative; 
    overflow: hidden; 
  }
  
  .shopping-list .section {
    margin-bottom: 15px; /* Minder marge */
  }

  label {
    font-weight: 700; 
    display: block;
    margin-top: 15px;
    margin-bottom: 6px;
    color: var(--color-text);
    font-size: 1em; /* Standaard lettergrootte */
  }

  input[type="text"], button {
    font-family: var(--font-body);
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    font-size: 1em;
    border: 2px solid var(--color-text); /* Dunnere rand */
    border-radius: 8px; /* Minder afgerond */
    box-sizing: border-box;
    background-color: #fffaf0;
  }

  input[type="text"]:focus {
    border-color: var(--color-secondary); 
    box-shadow: 2px 2px 0px var(--color-secondary); /* Kleinere focus schaduw */
    outline: none;
  }

  button {
    background-color: var(--color-primary); 
    color: white;
    border: 3px solid var(--color-text);
    cursor: pointer;
    font-weight: bold;
    letter-spacing: 1px;
    margin-top: 20px; /* Iets minder marge */
    box-shadow: 3px 3px 0px var(--color-text); /* Kleinere schaduw */
    transition: all 0.1s ease;
  }

  button:hover {
    background-color: #4ca067; 
    transform: none; /* Verwijder de translate voor mobiel */
    box-shadow: 3px 3px 0px var(--color-text);
  }
  
  .shopping-list strong {
    font-family: var(--font-heading);
    font-size: 1.4em; /* Iets kleiner */
    color: var(--color-primary);
  }

  .shopping-list li::before {
    left: -18px; /* Pas positie van ster aan */
  }

  .shopping-list-image {
    position: absolute; 
    bottom: 0px; /* Zorg dat het beeld niet te ver uitsteekt */
    left: 50%;
    transform: translateX(-50%) rotate(-3deg);
    width: 180px; /* Kleinere afbeelding voor mobiel */
    opacity: 0.7; /* Iets transparanter */
    z-index: 1;
    background: white;
    padding: 5px 5px 20px 5px; /* Minder padding */
    border: 1px solid #ccc;
    box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.1);
  }
  
  #export {
    right: 20px; /* Pas positie aan */
    bottom: 20px; /* Pas positie aan */
    padding: 8px 15px; /* Kleinere knop */
    font-size: 0.9em;
  }

  /* ------------------------------------------------
   * DESKTOP OVERRIDES (vanaf 768px)
   * ------------------------------------------------ */
  @media (min-width: 768px) {
    body { 
      flex-direction: row; 
      padding: 30px; 
    }
    
    h2 {
      margin-bottom: 25px;
      font-size: 2.5em;
      padding-bottom: 10px;
    }
    
    h2 img.logo-header {
      width: 50px;
      height: 50px;
    }

    .controls {
      max-width: 400px;
      margin-right: 40px;
      margin-bottom: 0;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 8px 8px 0px var(--color-primary);
    }
    
    .shopping-list {
      flex: 2;
      min-width: 250px;
      padding: 30px;
      border-radius: 20px; 
      box-shadow: -8px 8px 0px var(--color-secondary);
    }
    
    .shopping-list-image {
      bottom: -15px;
      width: 250px;
      opacity: 0.9;
      padding: 10px 10px 40px 10px;
      box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
    }

    button:hover {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0px var(--color-text);
    }
    
    .shopping-list strong {
      font-size: 1.5em;
    }
    
    .shopping-list li::before {
      left: -20px;
    }
    
    #export {
      right: 30px;
      bottom: 30px;
      padding: 10px 20px;
      font-size: 1em;
    }
  }
</style>
</head>
<body>

<div class="controls">
  <h2>Selecteer Je Maaltijden!</h2>
  <label for="day1">Maandag</label>
  <input type="text" list="day1List" id="day1" placeholder="Kies een recept..."><datalist id="day1List"></datalist>
  <label for="day2">Dinsdag</label>
  <input type="text" list="day2List" id="day2" placeholder="Kies een recept..."><datalist id="day2List"></datalist>
  <label for="day3">Woensdag</label>
  <input type="text" list="day3List" id="day3" placeholder="Kies een recept..."><datalist id="day3List"></datalist>
  <label for="day4">Donderdag</label>
  <input type="text" list="day4List" id="day4" placeholder="Kies een recept..."><datalist id="day4List"></datalist>
  <label for="day5">Vrijdag</label>
  <input type="text" list="day5List" id="day5" placeholder="Kies een recept..."><datalist id="day5List"></datalist>
  <label for="day6">Zaterdag</label>
  <input type="text" list="day6List" id="day6" placeholder="Kies een recept..."><datalist id="day6List"></datalist>
  <label for="day7">Zondag</label>
  <input type="text" list="day7List" id="day7" placeholder="Kies een recept..."><datalist id="day7List"></datalist>
  <button id="generate">GO! Maak de Boodschappenlijst!</button>
</div>

<div class="shopping-list">
  <h2>Boodschappenlijst! <img src="logo2.png" alt="Logo" class="logo-header"></h2>
  <div id="list"></div>
  <button id="export">üìÑ Exporteer boodschappenlijst</button>
  <img src="picture.jpg" alt="Decoratieve afbeelding" class="shopping-list-image">
</div>

<script>
// (Je JavaScript code blijft exact hetzelfde, maar met een kleine fix voor de template literals)

const recipes = {
  "Geen": [],
  "Tomatenrisotto met spinazie en chorizo": [
    {name: "Risottorijst", amount: 400, unit: "g", category: "Rijst/Couscous/Pasta"},
    {name: "Tomatenblokjes", amount: 1, unit: "blikje", category: "Groenten"},
    {name: "Ui", amount: 2, unit: "stuk", category: "Groenten"},
    {name: "Spinazie", amount: 400, unit: "g", category: "Groenten"},
    {name: "Citroen", amount: 1, unit: "stuk", category: "Groenten"},
    {name: "Chorizo", amount: 200, unit: "g", category: "Vlees/Vis"},
    {name: "Kippenbouillon", amount: 1, unit: "l", category: "Overig"}
  ],
  "Tex-mex eenpanswok met gehakt en aardappel": [
    {name: "Rundergehakt", amount: 500, unit: "g", category: "Vlees/Vis"},
    {name: "Aardappelschijfjes", amount: 600, unit: "g", category: "Groenten"},
    {name: "Mexicaanse roerbakgroenten", amount: 800, unit: "g", category: "Groenten"},
    {name: "Cheddar", amount: 150, unit: "g", category: "Zuivel"},
    {name: "Zure room", amount: 125, unit: "g", category: "Zuivel"},
    {name: "Guacamole", amount: 150, unit: "g", category: "Groenten"},
    {name: "Tacokruiden", amount: 1, unit: "zakje", category: "Kruiden"},
    {name: "Koriander", amount: 15, unit: "g", category: "Groenten"}
  ],
  "Vissticks met spinazie √† la cr√®me en krieltjes": [
    {name: "Vissticks", amount: 20, unit: "stuk", category: "Vlees/Vis"},
    {name: "Spinazie", amount: 750, unit: "g", category: "Groenten"},
    {name: "Krieltjes", amount: 900, unit: "g", category: "Groenten"},
    {name: "Appelmoes", amount: 0, unit: "naar smaak", category: "Groenten"}
  ],
  "Ovenschotel met gehakt broccoli": [
    {name: "Broccoli", amount: 1, unit: "stuk", category: "Groenten"},
    {name: "Aardappelen", amount: 800, unit: "g", category: "Groenten"},
    {name: "Spek", amount: 150, unit: "g", category: "Vlees/Vis"},
    {name: "Rundergehakt", amount: 500, unit: "g", category: "Vlees/Vis"},
    {name: "Ui", amount: 1, unit: "stuk", category: "Groenten"},
    {name: "Knoflook", amount: 2, unit: "teentjes", category: "Groenten"},
    {name: "Gehaktkruiden", amount: 1, unit: "zakje", category: "Kruiden"},
    {name: "Roomboter", amount: 25, unit: "g", category: "Zuivel"},
    {name: "Cr√®me fra√Æche", amount: 200, unit: "ml", category: "Zuivel"}
  ],
  "Kikkererwtencurry met couscous": [
    {name: "Kikkererwten", amount: 400, unit: "g", category: "Groenten"},
    {name: "Ui", amount: 1, unit: "stuk", category: "Groenten"},
    {name: "Knoflook", amount: 1.5, unit: "teentjes", category: "Groenten"},
    {name: "Kerriepoeder", amount: 1, unit: "el", category: "Kruiden"},
    {name: "Kokosmelk", amount: 200, unit: "ml", category: "Zuivel"},
    {name: "Tomatenblokjes", amount: 1, unit: "blikje", category: "Groenten"},
    {name: "Couscous", amount: 300, unit: "g", category: "Rijst/Couscous/Pasta"}
  ],
  "Hutspot met speklapjes": [
    {name: "Aardappelen", amount: 1000, unit: "g", category: "Groenten"},
    {name: "Hutspotgroenten", amount: 500, unit: "g", category: "Groenten"},
    {name: "Ui", amount: 2, unit: "stuk", category: "Groenten"},
    {name: "Speklapjes", amount: 2, unit: "stuk", category: "Vlees/Vis"}
  ],
  "Pasta pesto": [
    {name: "Pasta", amount: 300, unit: "g", category: "Rijst/Couscous/Pasta"},
    {name: "Kipfilet", amount: 400, unit: "g", category: "Vlees/Vis"},
    {name: "Ui", amount: 1, unit: "stuk", category: "Groenten"},
    {name: "Kookroom", amount: 250, unit: "ml", category: "Zuivel"},
    {name: "Cherry tomaten", amount: 250, unit: "g", category: "Groenten"},
    {name: "Peper", amount: 0, unit: "", category: "Kruiden"},
    {name: "Zout", amount: 0, unit: "", category: "Kruiden"},
    {name: "Pijnboompitten", amount: 60, unit: "g", category: "Overig"},
    {name: "Pesto", amount: 4, unit: "el", category: "Overig"}
  ],
  "Prei schotel": [
    {name: "Prei", amount: 500, unit: "g", category: "Groenten"},
    {name: "Rode paprika", amount: 1, unit: "stuk", category: "Groenten"},
    {name: "Aardappelschijfjes", amount: 600, unit: "g", category: "Groenten"},
    {name: "Rundergehakt", amount: 300, unit: "g", category: "Vlees/Vis"},
    {name: "Ei", amount: 1, unit: "stuk", category: "Overig"},
    {name: "Kookroom", amount: 125, unit: "ml", category: "Zuivel"},
    {name: "Maggi Prei-Kerrie mix", amount: 1, unit: "pakje", category: "Overig"}
  ],
  "Kip Siam": [
    {name: "Kipfilet", amount: 250, unit: "g", category: "Vlees/Vis"},
    {name: "Wokgroenten", amount: 700, unit: "g", category: "Groenten"},
    {name: "Kip Siam mix", amount: 1, unit: "stuk", category: "Overig"}
  ],
  "Stroganov schotel": [
    {name: "Kipgehakt", amount: 600, unit: "g", category: "Vlees/Vis"},
    {name: "Rode paprika", amount: 2, unit: "stuk", category: "Groenten"},
    {name: "Ui", amount: 2, unit: "stuk", category: "Groenten"},
    {name: "Champignons", amount: 1, unit: "bakje", category: "Groenten"},
    {name: "Cr√®me fra√Æche", amount: 500, unit: "ml", category: "Zuivel"},
    {name: "Kippenbouillonblokjes", amount: 3, unit: "stuk", category: "Kruiden"},
    {name: "Tomatenpuree", amount: 1, unit: "blikje", category: "Groenten"},
    {name: "Water", amount: 150, unit: "ml", category: "Overig"}
  ],
  "Cottage pie": [
    {name: "Rundergehakt", amount: 500, unit: "g", category: "Vlees/Vis"},
    {name: "Wortels/doperwten", amount: 1, unit: "blik", category: "Groenten"},
    {name: "Aardappelen", amount: 1000, unit: "g", category: "Groenten"},
    {name: "Melk", amount: 500, unit: "ml", category: "Zuivel"}
  ]
};

const days = ["day1","day2","day3","day4","day5","day6","day7"];
const recipeNames = Object.keys(recipes);
days.forEach(day => {
  const dataList = document.getElementById(day + "List");
  recipeNames.forEach(r => {
    const option = document.createElement("option");
    option.value = r;
    dataList.appendChild(option);
  });
});

// Boodschappenlijst genereren
document.getElementById("generate").addEventListener("click", () => {
  const selected = days.map(d => document.getElementById(d).value.trim() || "Geen");
  const aggregated = {};
  selected.forEach(r => {
    if (r === "Geen") return;
    recipes[r].forEach(item => {
      const key = item.name + " (" + item.unit + ")";
      if (!aggregated[item.category]) aggregated[item.category] = {};
      if (!aggregated[item.category][key]) aggregated[item.category][key] = 0;
      aggregated[item.category][key] += item.amount;
    });
  });

  let html = "";
  Object.keys(aggregated).forEach(cat => {
    html += `<div class="section"><strong>${cat}</strong><ul>`;
    Object.keys(aggregated[cat]).forEach(i => {
      const itemName = i.split(" (")[0];
      const itemId = itemName.toLowerCase().replace(/\s+/g, "_");
      const checked = sessionStorage.getItem(itemId) === "true" ? "checked" : "";
      const checkedClass = checked ? "checked" : "";
      // Fix for template literal in JS, using backticks for the outer string
      html += `<li><label class="check-item"><input type="checkbox" class="item-checkbox" data-id="${itemId}" ${checked}><span class="item-text ${checkedClass}">${itemName}: ${aggregated[cat][i]} ${i.match(/\((.*)\)/)[1]}</span></label></li>`;
    });
    html += "</ul></div>";
  });

  document.getElementById("list").innerHTML = html;
  document.getElementById("export").style.display = "inline-block";

  document.querySelectorAll(".item-checkbox").forEach(box => {
    box.addEventListener("change", e => {
      const text = e.target.nextElementSibling;
      const id = e.target.dataset.id;
      if (e.target.checked) {
        text.classList.add("checked");
        sessionStorage.setItem(id, "true");
      } else {
        text.classList.remove("checked");
        sessionStorage.setItem(id, "false");
      }
    });
  });
});

// Export .txt en wis vinkjes uit sessionStorage
document.getElementById("export").addEventListener("click", () => {
  let output = "Boodschappenlijst (niet-afgevinkte items)\n\n";
  document.querySelectorAll(".section").forEach(sec => {
    const cat = sec.querySelector("strong").innerText;
    const lines = [...sec.querySelectorAll("li")]
      .filter(li => !li.querySelector(".item-checkbox").checked)
      .map(li => " - " + li.querySelector(".item-text").innerText);
    if (lines.length > 0) output += `${cat}:\n${lines.join("\n")}\n\n`;
  });

  const blob = new Blob([output], {type:"text/plain"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url; a.download = "boodschappenlijst.txt"; a.click();
  URL.revokeObjectURL(url);

  // üßπ Wis vinkstatus na export
  sessionStorage.clear();
});
</script>
</body>
</html>